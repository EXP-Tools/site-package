<!DOCTYPE html>
<html lang="zh-cn">
    
    <head>
        <meta charset="utf-8" />
        <meta name="author" content="EXP: www.exp-blog.com" />
        <link rel="shortcut icon" href="https://exp-blog.com/favicon.png" />
        <title>眈眈探求 | OCR 文字识别</title>
        <meta name="keywords" content="OCR文字识别工具,图片文字识别" />
        <meta name="description" content="在线OCR文字识别工具，从图片中识别出文字，辨识率非常高" />
        <link rel="stylesheet" type="text/css" href="../../base/css/base2.css" />
        <script src="./js/ocr.js">
            var ocr = new BaiduOCR();
        </script>
    </head>
    <body>
        <div class="content">
            <div class="content-body">
                <div class="tool-title clearfix">
                    <h1 class="tool-name">
                        OCR 图片文字识别工具
                    </h1>
                </div>
                <form name="wawa" class="tool-form">
                    <div id="file-select" class="drop-upload">
                        <!-- <p>拖放一张图片到这里，或者
                            <a id="pickfile" href="javascript: fileByBase64();">选择图片</a>
                        </p> -->
                        <div>
                        <!--accept只能与file配合使用。它可以限制上传的文件类型
                            当然你也可以写成 accept="image/*"-->
                            <input type="file" id="myimg"
                                    onchange="imgChange(this)"
                                    accept="image/png,image/jpeg"/>
                        </div>
                        <img src="0" />
                        <script>
                            function imgChange(img) {
                                console.log(img.files)
                                // 生成一个文件读取的对象
                                const reader = new FileReader();
                                reader.onload = function (ev) {
                                    // base64码
                                    var imgFile = ev.target.result;//或e.target都是一样的
                                    document.querySelector("img").src= ev.target.result;


                                    var tokenHttp = new XMLHttpRequest();
                                    var url = `https://aip.baidubce.com/oauth/2.0/token?
                                    grant_type=client_credentials&
                                    client_id=1wAxyEHuGNi6AlBmEU85G7ye&
                                    client_secret=hMH5XmM1ahmUqgQr6zO7ixIl13bHq6CD&`;
                                    tokenHttp.open("post", url);	
                                    tokenHttp.setRequestHeader('content-type','application/x-www-form-urlencoded');
                                    tokenHttp.setRequestHeader('Access-Control-Allow-Origin','*');
                                    tokenHttp.setRequestHeader('Referer', 'https://lyy289065406.github.io/site-package/tool/ocr/index.html')
                                    tokenHttp.setRequestHeader('Host','lyy289065406.github.io');
                                    tokenHttp.setRequestHeader('Origin','https://foo.example');
                                    tokenHttp.send()
                                    console.log(33);
                                    tokenHttp.onload = function (e) {
                                        console.log(22);
                                        data = e.target.response;
                                        console.log(data);
                                        
                                        var jd = JSON.parse(data);
                                        var token = jd.access_token;
                                        var http = new XMLHttpRequest();						
                                        var url = "https://aip.baidubce.com/rest/2.0/ocr/v1/accurate_basic?access_token=" + this.token;
                                        var img = "image="+imgFile;		
                                        http.open("post", url);	
                                        http.setRequestHeader('content-type','application/x-www-form-urlencoded');			
                                        http.send(img);
                                        http.onload = function (e) {
                                            console.log(11);
                                            console.log(e.target.response);
                                        };
                                    };
                                    console.log(44);

                                }
                                //发起异步读取文件请求，读取结果为data:url的字符串形式，
                                reader.readAsDataURL(img.files[0]);
                                console.log(55);



                            }
                        </script>
                    </div>
                    <div id="tool-tips">
                    </div>
                    <div id="tool-result" class="hide">
                    </div>
                    <p class="btn-list hide">
                        <input class="btn btn-success btn-copy" type="button" value="复制" data-clipboard-target="#tool-result">
                    </p>
                    <p class="tips">
                        提示：如果使用手机拍照上传图片，请横屏拍照。图片内文字必须摆正，否则无法正确识别。
                        <br/>
                        本工具使用百度【通用文字识别】API，请勿调用本站接口。
                        <br/>
                        详细了解见 https://ai.baidu.com/tech/ocr/general
                    </p>
                </form>
                <div class="wwads-cn wwads-horizontal" data-id="102" style="max-width:100%">
                </div>
                <div class="tool-info">
                    <h5>
                        光学字符识别
                    </h5>
                    <p>
                        OCR （Optical Character Recognition，光学字符识别）是指电子设备（例如扫描仪或数码相机）检查纸上打印的字符，通过检测暗、亮的模式确定其形状，然后用字符识别方法将形状翻译成计算机文字的过程；即，针对印刷体字符，采用光学的方式将纸质文档中的文字转换成为黑白点阵的图像文件，并通过识别软件将图像中的文字转换成文本格式，供文字处理软件进一步编辑加工的技术。如何除错或利用辅助信息提高识别正确率，是OCR最重要的课题，ICR（Intelligent
                        Character Recognition）的名词也因此而产生。衡量一个OCR系统性能好坏的主要指标有：拒识率、误识率、识别速度、用户界面的友好性，产品的稳定性，易用性及可行性等。
                    </p>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            var WWW_APP = './';
            var WWW_PUBLIC = './';
            var WWW_URL = './';
            var WWW_TID = 35;
            var WWW_UID = 0;
        </script>
        <script src="../../base/js/public.min.js?v=241d7a662e"></script>
        <!-- <script src="./js/plupload.full.min.js"></script>
        <script src="./js/ocr.min.js?v=b8c4ae57cd"> -->
    </body>

</html>